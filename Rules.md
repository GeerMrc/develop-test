# 开发规范与说明

## 代码规范
1. 文件组织
   - 核心功能模块放在 src/core/
   - 工具类放在 src/utils/
   - 测试代码放在 tests/
   - 配置文件放在 config/

2. 命名规范
   - 类名使用 PascalCase (例如: ProductManager)
   - 方法和变量使用 snake_case (例如: get_product_info)
   - 常量使用 UPPER_CASE (例如: MAX_RETRY_COUNT)
   - 私有方法前缀使用 _ (例如: _parse_html)
   - 测试文件以 test_ 开头
   - 测试方法以 test_ 开头

3. 注释规范
   - 类和方法必须有文档字符串
   - 复杂逻辑需要添加行内注释
   - 关键步骤需要添加说明
   - 所有公开 API 必须有完整的参数说明

4. 代码格式
   - 使用 4 空格缩进
   - 最大行长度 120 字符
   - 类之间空两行
   - 方法之间空一行

## 目录结构说明
1. data/
   - images/: 存储下载的商品图片
   - results/: 存储测试结果 JSON 文件
   - debug/: 存储页面快照等调试信息

2. logs/
   - 所有日志文件集中存储
   - 按时间戳命名日志文件
   - 日志级别: DEBUG, INFO, WARNING, ERROR
   - 日志格式: [时间] [级别] [模块] - 消息

## 开发进度记录

### 2024-01-18 17:52 更新
1. 基础框架搭建
   - [x] 项目结构初始化
   - [x] 配置文件系统
   - [x] 日志系统
   - [x] 异常处理机制

2. 多浏览器支持
   - [x] Chrome/Chromium
   - [x] Firefox
   - [x] Safari/WebKit
   - [x] 浏览器配置管理
   - [x] 浏览器会话管理

3. 商品信息提取
   - [x] 标题提取优化
   - [x] 价格信息提取
   - [x] 图片资源提取
   - [x] 抢购时间提取
   - [x] 商品状态监控

4. 图片处理
   - [x] 自动下载商品图片
   - [x] 图片保存格式化
   - [x] 下载状态记录
   - [x] 图片质量验证

5. 日志系统
   - [x] 统一日志格式
   - [x] 分级日志记录
   - [x] 日志文件管理
   - [x] 日志轮转策略

### 待开发功能
1. Web 界面 (预计 2024-02)
   - [ ] 商品信息展示
   - [ ] 实时状态更新
   - [ ] 操作控制面板
   - [ ] 数据可视化

2. 抢购功能 (进行中)
   - [ ] 登录认证
   - [ ] 下单流程
   - [ ] 并发处理
   - [ ] 支付接口对接

3. 性能优化 (计划中)
   - [ ] 资源缓存
   - [ ] 并发控制
   - [ ] 错误重试
   - [ ] 内存管理

## 测试规范
1. 单元测试
   - 核心功能必须有单元测试
   - 测试覆盖率要求 > 80%
   - 测试用例需要考虑边界条件
   - 使用 pytest 框架

2. 集成测试
   - 完整流程测试
   - 多浏览器兼容性测试
   - 性能压力测试
   - 网络异常测试

3. 测试数据管理
   - 使用 fixtures 管理测试数据
   - 测试数据需要版本控制
   - 敏感数据需要脱敏处理

## 版本控制
1. 分支管理
   - main: 主分支，稳定版本
   - develop: 开发分支，最新特性
   - feature/*: 功能分支，新功能开发
   - bugfix/*: 修复分支，问题修复
   - release/*: 发布分支，版本发布

2. 提交规范
   - feat: 新功能 (feature)
   - fix: 修复问题 (bug fix)
   - docs: 文档更新 (documentation)
   - style: 代码格式 (formatting, missing semi colons, etc)
   - refactor: 重构 (refactoring production code)
   - test: 测试相关 (adding missing tests, refactoring tests)
   - chore: 构建过程或辅助工具的变动

3. 版本号规范
   - 主版本号: 不兼容的 API 修改
   - 次版本号: 向下兼容的功能性新增
   - 修订号: 向下兼容的问题修复

## 发布流程
1. 准备工作
   - 更新版本号
   - 更新更新日志
   - 完成所有测试

2. 代码审查
   - 提交 Pull Request
   - 代码评审
   - 解决反馈

3. 合并发布
   - 合并到主分支
   - 创建版本标签
   - 部署新版本